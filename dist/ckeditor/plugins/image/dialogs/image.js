CKEDITOR.dialog.add("image",function(){var c;return{title:"Edit Image",minWidth:310,minHeight:100,contents:[{id:"info",elements:[{id:"url",type:"text",label:"URL",onLoad:function(){c=this},commit:function(a){a.setData("url",this.getValue())}},{type:"html",label:"Upload",html:'<input type="file" name="attachment" id="attachment"/>',onLoad:function(){var a=document.getElementById("attachment");a.onchange=function(){var d=a.files[0],b=new FileReader;b.onload=function(){c.setValue(b.result)};b.readAsDataURL(d)}}}]}]}});